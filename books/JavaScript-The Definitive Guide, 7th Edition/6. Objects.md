# Chapter 6. Objects

## 6.1 Introduction to Objects

- Objects: an unordered collection of properties, each of which has a name and a value
  - property들은 각각 name과 value를 가지고 있음
    - name은 어떤 string이나 가능하며 empty string도 가능. Symbol도 가능
  - hash, hashtable, dictionary, associative array와 비슷
  - a simple string-to-value map
- 다른 object(prototype)로부터 property들을 상속받음
  - 어떤 object에서 직접 정의한 property와 상속받은 property를 구분하기 위해 *own property*라는 용어를 사용함
- JS의 object는 dynamic(property들이 추가되거나 삭제될 수 있음)하지만, statically typed language의 structs나 static objects를 흉내낼 수도 있음
- value부분을 무시한다면 sets of strings을 나타내는데 사용될 수도 있음
- string, number, boolean은 object가 아니지만, immutable object처럼 행동할 수 있음
- 모든 개별 property들은 name과 value뿐만 아니라 3가지 *property attribute*를 가짐
  - *writable*: value를 set할 수 있는지 명시
  - *enumerable*: `for/in` loop로 property name이 return되는지
  - *configurable*: property가 삭제될 수 있는지, 그 property attribute들이 바뀔 수 있는지
- 많은 built-in object들은 read-only, non-enumerable, non-configurable이며, 사용자가 만드는 object들은 기본적으로 writable, enumerable, configurable

## 6.2 Creating Objects

- 새로운 object를 만드는 방법 3가지. object literal, `new` keyword, `Object.create()`

### 6.2.1 Object Literals

- reserved word도 property의 key로 사용할 수 있음

    ```js
    let book = {
        "main title": "JavaScript", // These property names include spaces,
        "sub-title": "The Definitive Guide", // and hyphens, so use string literals.
        for: "all audiences", // for is reserved, but no quotes.
        author: { // The value of this property is  itself an object.
            firstname: "David", 
            surname: "Flanagan"
        }
    };
    ```

### 6.2.2 Creating Objects with new

- `new` operator는 새로운 object를 만들고 초기화함
- 반드시 `new` 뒤에 constructor가 와야함
- constructor: 새로 만들어지는 object에 초기값을 할당해주는 function

### 6.2.3 Prototypes

- 대부분의 object들은 그와 관련된 *prototype*이라는 두번째 object를 가짐
- `new` keyword와 constructor function의 조합으로 만들어지는 object는 그 constructor의 property들 중 key가 `prototype`인 property의 value를 그 만들어지는 object의 prototype으로 사용함
- 거의 모든 object들이 *prototype*을 갖지만, 비교적 적은 수의 object들만이 `prototype`이라는 property를 갖음
- 즉, 다른 object들의 *prototype*를 정의해주기 위해 `prototype`이라는 이름을 가진 property를 갖는 것

> **prototype을 가지고 있는 것과 key가 prototype인 property를 가지고 있는 것을 구분해야**

### 6.2.4 Object.create()

- `Object.create()`: 첫번째 argument를 prototype으로 가지는 새로운 object를 만듬

    ```js
    let o1 = Object.create({x: 1, y: 2});   // {x: 1, y: 2}와 Object.prototype을 prototype으로 갖는 빈 object 생성
    let o2 = Object.create(null);   // prototype이 없는 빈 object 생성
    let o3 = Object.create(Object.prototype);   // Object.prototype만을 prototype으로 갖는 빈 object 생성. let o3 = {}와 같음
    ```

- 두번째 argument로는 새 object의 property들을 선택적으로 받음
- 제어할 수 없는 3rd-party library의 function에 argument로 어떤 object를 넘길 때, 그 object를 `Object.create`에 argument로 담아 넘기면 그 original object가 의도치 않게 mutate되는 것을 방지할 수 있음

    ```js
    function setXto100(obj) {
        console.log('(before) o:', o)
        console.log('(before) o1:', o1)
        obj.x = 100
    }

    const o = { x: 1, y: 2 }
    const o1 = Object.create(o)
    setXto100(o1)
    console.log('(after) o: ', o)
    console.log('(after) o1: ', o1)
    ```

## 6.3 Querying and Setting Properties
