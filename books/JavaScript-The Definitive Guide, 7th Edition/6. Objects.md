# Chapter 6. Objects

## 6.1 Introduction to Objects

- Objects: an unordered collection of properties, each of which has a name and a value
  - propertyë“¤ì€ ê°ê° nameê³¼ valueë¥¼ ê°€ì§€ê³  ìžˆìŒ
    - nameì€ ì–´ë–¤ stringì´ë‚˜ ê°€ëŠ¥í•˜ë©° empty stringë„ ê°€ëŠ¥. Symbolë„ ê°€ëŠ¥
  - hash, hashtable, dictionary, associative arrayì™€ ë¹„ìŠ·
  - a simple string-to-value map
- ë‹¤ë¥¸ object(prototype)ë¡œë¶€í„° propertyë“¤ì„ ìƒì†ë°›ìŒ
  - ì–´ë–¤ objectì—ì„œ ì§ì ‘ ì •ì˜í•œ propertyì™€ ìƒì†ë°›ì€ propertyë¥¼ êµ¬ë¶„í•˜ê¸° ìœ„í•´ *own property*ë¼ëŠ” ìš©ì–´ë¥¼ ì‚¬ìš©í•¨
- JSì˜ objectëŠ” dynamic(propertyë“¤ì´ ì¶”ê°€ë˜ê±°ë‚˜ ì‚­ì œë  ìˆ˜ ìžˆìŒ)í•˜ì§€ë§Œ, statically typed languageì˜ structsë‚˜ static objectsë¥¼ í‰ë‚´ë‚¼ ìˆ˜ë„ ìžˆìŒ
- valueë¶€ë¶„ì„ ë¬´ì‹œí•œë‹¤ë©´ sets of stringsì„ ë‚˜íƒ€ë‚´ëŠ”ë° ì‚¬ìš©ë  ìˆ˜ë„ ìžˆìŒ
- string, number, booleanì€ objectê°€ ì•„ë‹ˆì§€ë§Œ, immutable objectì²˜ëŸ¼ í–‰ë™í•  ìˆ˜ ìžˆìŒ
- ëª¨ë“  ê°œë³„ propertyë“¤ì€ nameê³¼ valueë¿ë§Œ ì•„ë‹ˆë¼ 3ê°€ì§€ *property attribute*ë¥¼ ê°€ì§
  - *writable*: valueë¥¼ setí•  ìˆ˜ ìžˆëŠ”ì§€ ëª…ì‹œ
  - *enumerable*: `for/in` loopë¡œ property nameì´ returnë˜ëŠ”ì§€
  - *configurable*: propertyê°€ ì‚­ì œë  ìˆ˜ ìžˆëŠ”ì§€, ê·¸ property attributeë“¤ì´ ë°”ë€” ìˆ˜ ìžˆëŠ”ì§€
- ë§Žì€ built-in objectë“¤ì€ read-only, non-enumerable, non-configurableì´ë©°, ì‚¬ìš©ìžê°€ ë§Œë“œëŠ” objectë“¤ì€ ê¸°ë³¸ì ìœ¼ë¡œ writable, enumerable, configurable

## 6.2 Creating Objects

- ìƒˆë¡œìš´ objectë¥¼ ë§Œë“œëŠ” ë°©ë²• 3ê°€ì§€. object literal, `new` keyword, `Object.create()`

### 6.2.1 Object Literals

- reserved wordë„ propertyì˜ keyë¡œ ì‚¬ìš©í•  ìˆ˜ ìžˆìŒ

    ```js
    let book = {
        "main title": "JavaScript", // These property names include spaces,
        "sub-title": "The Definitive Guide", // and hyphens, so use string literals.
        for: "all audiences", // for is reserved, but no quotes.
        author: { // The value of this property is  itself an object.
            firstname: "David", 
            surname: "Flanagan"
        }
    };
    ```

### 6.2.2 Creating Objects with new

- `new` operatorëŠ” ìƒˆë¡œìš´ objectë¥¼ ë§Œë“¤ê³  ì´ˆê¸°í™”í•¨
- ë°˜ë“œì‹œ `new` ë’¤ì— constructorê°€ ì™€ì•¼í•¨
- constructor: ìƒˆë¡œ ë§Œë“¤ì–´ì§€ëŠ” objectì— ì´ˆê¸°ê°’ì„ í• ë‹¹í•´ì£¼ëŠ” function

### 6.2.3 Prototypes

- ëŒ€ë¶€ë¶„ì˜ objectë“¤ì€ ê·¸ì™€ ê´€ë ¨ëœ *prototype*ì´ë¼ëŠ” ë‘ë²ˆì§¸ objectë¥¼ ê°€ì§
- `new` keywordì™€ constructor functionì˜ ì¡°í•©ìœ¼ë¡œ ë§Œë“¤ì–´ì§€ëŠ” objectëŠ” ê·¸ constructorì˜ propertyë“¤ ì¤‘ keyê°€ `prototype`ì¸ propertyì˜ valueë¥¼ ê·¸ ë§Œë“¤ì–´ì§€ëŠ” objectì˜ prototypeìœ¼ë¡œ ì‚¬ìš©í•¨
- ê±°ì˜ ëª¨ë“  objectë“¤ì´ *prototype*ì„ ê°–ì§€ë§Œ, ë¹„êµì  ì ì€ ìˆ˜ì˜ objectë“¤ë§Œì´ `prototype`ì´ë¼ëŠ” propertyë¥¼ ê°–ìŒ
- ì¦‰, ë‹¤ë¥¸ objectë“¤ì˜ *prototype*ë¥¼ ì •ì˜í•´ì£¼ê¸° ìœ„í•´ `prototype`ì´ë¼ëŠ” ì´ë¦„ì„ ê°€ì§„ propertyë¥¼ ê°–ëŠ” ê²ƒ

> **prototypeì„ ê°€ì§€ê³  ìžˆëŠ” ê²ƒê³¼ keyê°€ prototypeì¸ propertyë¥¼ ê°€ì§€ê³  ìžˆëŠ” ê²ƒì„ êµ¬ë¶„í•´ì•¼**

### 6.2.4 Object.create()

- `Object.create()`: ì²«ë²ˆì§¸ argumentë¥¼ prototypeìœ¼ë¡œ ê°€ì§€ëŠ” ìƒˆë¡œìš´ objectë¥¼ ë§Œë“¬

    ```js
    let o1 = Object.create({x: 1, y: 2});   // {x: 1, y: 2}ì™€ Object.prototypeì„ prototypeìœ¼ë¡œ ê°–ëŠ” ë¹ˆ object ìƒì„±
    let o2 = Object.create(null);   // prototypeì´ ì—†ëŠ” ë¹ˆ object ìƒì„±
    let o3 = Object.create(Object.prototype);   // Object.prototypeë§Œì„ prototypeìœ¼ë¡œ ê°–ëŠ” ë¹ˆ object ìƒì„±. let o3 = {}ì™€ ê°™ìŒ
    ```

- ë‘ë²ˆì§¸ argumentë¡œëŠ” ìƒˆ objectì˜ propertyë“¤ì„ ì„ íƒì ìœ¼ë¡œ ë°›ìŒ
- ì œì–´í•  ìˆ˜ ì—†ëŠ” 3rd-party libraryì˜ functionì— argumentë¡œ ì–´ë–¤ objectë¥¼ ë„˜ê¸¸ ë•Œ, ê·¸ objectë¥¼ `Object.create`ì— argumentë¡œ ë‹´ì•„ ë„˜ê¸°ë©´ ê·¸ original objectê°€ ì˜ë„ì¹˜ ì•Šê²Œ mutateë˜ëŠ” ê²ƒì„ ë°©ì§€í•  ìˆ˜ ìžˆìŒ

    ```js
    function setXto100(obj) {
        console.log('(before) o:', o)
        console.log('(before) o1:', o1)
        obj.x = 100
    }

    const o = { x: 1, y: 2 }
    const o1 = Object.create(o)
    setXto100(o1)
    console.log('(after) o: ', o)
    console.log('(after) o1: ', o1)
    ```

## 6.3 Querying and Setting Properties

### 6.3.1 Objects As Associative Arrays

### 6.3.2 Inheritance

- ì–´ë–¤ objectì˜ `prototype` attributeëŠ” propertyë“¤ì´ ìƒì†ë˜ëŠ” chain ë˜ëŠ” linked listë¥¼ ë§Œë“¬
- ë§Œì•½ object `o`ì˜ `x` propertyì— ì ‘ê·¼í•˜ë©´
  - `o`ì˜ own propertyë“¤ì—ì„œ `x`ë¥¼ ì°¾ìŒ
  - ì—†ìœ¼ë©´ `o`ì˜ prototype objectì˜ own propertyë“¤ì—ì„œ`x`ë¥¼ ì°¾ìŒ
  - prototype propertyê°€ `null`ì¸ prototype objectì— ë„ë‹¬í•  ë•Œ ê¹Œì§€ ì˜¬ë¼ê°
  - ì°¾ìœ¼ë©´ ê·¸ ê°’ì„, ëª» ì°¾ìœ¼ë©´ `undefined`ì„ ë°˜í™˜
- ë§Œì•½ object `o`ì˜ `x` propertyì— ê°’ì„ í• ë‹¹í•˜ë©´
  - `o`ì˜ own propertyë“¤ì—ì„œ `x`ë¥¼ ì°¾ìŒ
  - ì—†ìœ¼ë©´ `o`ì˜ prototype objectì˜ own propertyë“¤ì— `x`ê°€ ìžˆë”ë¼ë„ ê±°ê¸°ì— ê°’ì„ ë°”ê¾¸ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ `o`ì˜ ìƒˆë¡œìš´ own propertyë¡œ `x`ë¥¼ ë§Œë“¤ê³  ê±°ê¸°ì— ê°’ì„ í• ë‹¹í•¨ -> **overriding inherited properties**

  ```js
  const grandParent = {
    name: {
      firstName: 'gp first',
      lastName: 'gp last',
    },
    age: 80,
  };

  const parent = Object.create(grandParent);
  parent.name = {
    firstName: 'p first',
    lastName: 'p last',
  };
  parent.age = 40;

  const child = Object.create(parent);

  child.age = 'child added his age';
  child.name = 'name';
  child.name.firstName = 'child wanted to add his own name.';

  console.log(
    'ðŸš€ ~ getNestedPrototypeOf(child, 3)',
    getNestedPrototypeOf(child, 3)
  );

  function getNestedPrototypeOf(target, level = 1) {
    return level > 0
      ? getNestedPrototypeOf(Object.getPrototypeOf(target), level - 1)
      : target;
  }
  ```

  - ì´ ê²½ìš°ë„ prototype chainì„ ê²€ìƒ‰í•˜ì§€ë§Œ ê°’ì„ í• ë‹¹í•  ìˆ˜ ìžˆëŠ”ì§€ í™•ì¸í•˜ëŠ” ìš©ë„
  - prototype objectê°€ í•´ë‹¹ propertyë¥¼ ê°€ì§€ê³  ìžˆëŠ”ë° read-onlyì´ë©´ ìƒˆë¡œìš´ own propertyë¥¼ ë§Œë“œëŠ” ê²ƒë„ ì•ˆë¨
  - ë”°ë¼ì„œ propertyì— ê°’ì„ í• ë‹¹í•˜ëŠ” ìƒˆ own property ìƒì„±, ê¸°ì¡´ own propertyì— í• ë‹¹ ë˜ëŠ” í• ë‹¹ì— ì‹¤íŒ¨í•˜ê²Œ ë˜ëŠ”ë° í•œê°€ì§€ ì˜ˆì™¸ê°€ ìžˆìŒ
    - ìƒì†ë°›ì€ propertyê°€ setter methodë¥¼ ê°€ì§„ accessor propertyë¼ë©´, own propertyë¥¼ ë§Œë“œëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ê·¸ prototype objectì˜ setter methodë¥¼ callí•¨

      ```js
      const parent = {
        set current(name) {
          this.log.push(name);
        },
        log: [],
      };

      const child = Object.create(parent);
      child.current = 'child current';
      child.log = ['child log'];
      parent.current = 'parent current';

      console.log('ðŸš€ > child.log', child.log); // ['child log']
      console.log('ðŸš€ > parent.log', parent.log); // ['child current', 'parent current']
      ```

### 6.3.3 Property Access Errors

- ì¡´ìž¬í•˜ì§€ ì•ŠëŠ” propertyì— ì ‘ê·¼í•˜ëŠ” ê²ƒì€ error ì•„ë‹˜ -> `undefined` ë°˜í™˜
- ì¡´ìž¬í•˜ì§€ ì•ŠëŠ” objectì˜ propertyì— ì ‘ê·¼í•˜ëŠ” ê²ƒì€ TypeError

  ```js
  // ì–´ë–¤ propertyì— ì ‘ê·¼í•˜ê¸° ìœ„í•´ ê·¸ objectê°€ ì¡´ìž¬í•˜ëŠ”ì§€ ì²´í¬í•˜ëŠ” ë°©ë²•
  let surname = book && book.author && book.author.surname;
  let surname = book?.author?.surname;
  ```

- ì–´ë–¤ propertyì— ê°’ì„ setí•˜ëŠ” ê²ƒì´ í•­ìƒ ì„±ê³µí•˜ëŠ” ê²ƒì€ ì•„ë‹˜
  - object `o`ì˜ property `p`ì— ê°’ì„ í• ë‹¹í•˜ëŠ” ê²ƒì— ì‹¤íŒ¨í•˜ëŠ” ê²½ìš°
    - `o`ì˜ own property ë˜ëŠ” inherited property `p`ê°€ read-only
    - `o`ê°€ own property `p`ë¥¼ ê°€ì§€ì§€ ì•Šê³ , inherited property `p`ê°€ setter methodê°€ ì•„ë‹ˆë©´ì„œ `o`ì˜ *extensible* attributeê°€ `false`ì¸ ê²½ìš°
  - strict modeê°€ ì•„ë‹ˆë©´ TypeErrorê°€ ë°œìƒë˜ì§€ ì•ŠìŒ

## 6.4 Deleting Properties

- `delete` operatorëŠ” own propertyë§Œ ì‚­ì œí•˜ë©°, inherited propertyì—ëŠ” ì˜í–¥x
- inherited propertyë¥¼ ì‚­ì œí•˜ë ¤ë©´ prototype objectì—ì„œ ì§€ì›Œì•¼ í•¨
- `delete`ëŠ” *configurable* attributeê°€ `false`ì¸ propertyë¥¼ ì‚­ì œí•˜ë ¤ê³  í•˜ë©´ `false`ë¥¼ returní•˜ê³  ë‚˜ë¨¸ì§€ ê²½ìš° ëª¨ë‘ `true` return

  ```js
  let o = {x: 1}; // o has own property x and inherits property toString
  delete o.x // => true: deletes property x
  delete o.x // => true: does nothing (x doesn't exist) but true anyway
  delete o.toString // => true: does nothing (toString isn't an own property)
  delete 1 // => true: nonsense, but true anyway
  ```

- strict modeì—ì„œëŠ” `false`ë¥¼ returní•˜ëŠ” ëŒ€ì‹  TypeError ë°œìƒ

  ```js
  delete Object.prototype // => false: property is nonconfigurable
  var x = 1; // Declare a global variable
  delete globalThis.x // => false: can't delete this property
  // true returní•˜ëŠ”ë°??
  function f() {} // Declare a global function
  delete globalThis.f // => false: can't delete this property either
  ```

  ```js
  var x = 1;
  console.log('ðŸš€ > globalThis.x', globalThis.x); // undefined
  console.log('ðŸš€ > delete x', delete x); // false
  console.log('ðŸš€ > globalThis.x', globalThis.x); // undefined
  console.log('ðŸš€ > x', x); // 1
  console.log('ðŸš€ > globalThis', globalThis); // Window
  console.log('ðŸš€ > window', window); // Window

  globalThis.x = 1;
  console.log('ðŸš€ > delete globalThis.x', delete globalThis.x); // true
  ```

## 6.5 Testing Properties
